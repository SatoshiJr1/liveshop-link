<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test "Se souvenir de moi" - LiveShop Link</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
        }
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
        .info { color: #3b82f6; }
        button {
            background: #8b5cf6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #7c3aed;
        }
        input {
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
            margin: 5px;
            width: 200px;
        }
        .checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }
        .checkbox input[type="checkbox"] {
            width: auto;
        }
        .status {
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: bold;
        }
        .status.success { background: rgba(16, 185, 129, 0.2); border: 1px solid #10b981; }
        .status.error { background: rgba(239, 68, 68, 0.2); border: 1px solid #ef4444; }
        .status.info { background: rgba(59, 130, 246, 0.2); border: 1px solid #3b82f6; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Test "Se souvenir de moi" - LiveShop Link</h1>
        <p>Page de test pour v√©rifier que la fonctionnalit√© "Se souvenir de moi" fonctionne parfaitement.</p>
        
        <div class="test-section">
            <h2>üíæ Test "Se souvenir de moi"</h2>
            
            <div class="checkbox">
                <input type="checkbox" id="remember-me-test">
                <label for="remember-me-test">Se souvenir de moi</label>
            </div>
            
            <div class="checkbox">
                <input type="tel" id="phone-test" placeholder="+221771234567" value="+221771234567">
                <label for="phone-test">Num√©ro de t√©l√©phone</label>
            </div>
            
            <button onclick="testRememberMe()">üß™ Tester "Se souvenir"</button>
            <button onclick="clearRememberMe()">üóëÔ∏è Effacer les donn√©es</button>
            <button onclick="loadRememberMe()">üì± Charger les donn√©es</button>
            
            <div id="remember-result" class="status info">En attente du test...</div>
        </div>

        <div class="test-section">
            <h2>üîç √âtat du localStorage</h2>
            <button onclick="showLocalStorage()">üìä Afficher localStorage</button>
            <div id="localStorage-status" class="status info">Cliquez pour voir l'√©tat</div>
        </div>

        <div class="test-section">
            <h2>‚úÖ V√©rifications</h2>
            <div id="verifications"></div>
        </div>
    </div>

    <script>
        // Test de "Se souvenir de moi"
        function testRememberMe() {
            const checkbox = document.getElementById('remember-me-test');
            const phone = document.getElementById('phone-test').value;
            const result = document.getElementById('remember-result');
            
            if (checkbox.checked) {
                // Sauvegarder les donn√©es
                localStorage.setItem('remembered_phone', phone);
                localStorage.setItem('remember_me', 'true');
                
                result.innerHTML = `
                    <strong>‚úÖ "Se souvenir" activ√© :</strong><br>
                    Num√©ro sauvegard√© : ${phone}<br>
                    Pr√©f√©rence sauvegard√©e : true<br>
                    üîÑ Rechargez la page pour tester la persistance
                `;
                result.className = 'status success';
            } else {
                // Supprimer les donn√©es
                localStorage.removeItem('remembered_phone');
                localStorage.removeItem('remember_me');
                
                result.innerHTML = `
                    <strong>‚ùå "Se souvenir" d√©sactiv√© :</strong><br>
                    Donn√©es supprim√©es du localStorage<br>
                    üîÑ Rechargez la page pour v√©rifier
                `;
                result.className = 'status error';
            }
            
            // Mettre √† jour les v√©rifications
            updateVerifications();
        }

        // Effacer les donn√©es de "Se souvenir"
        function clearRememberMe() {
            localStorage.removeItem('remembered_phone');
            localStorage.removeItem('remember_me');
            
            document.getElementById('remember-result').innerHTML = `
                <strong>üóëÔ∏è Donn√©es effac√©es :</strong><br>
                localStorage nettoy√©<br>
                ‚úÖ Pr√™t pour de nouveaux tests
            `;
            document.getElementById('remember-result').className = 'status info';
            
            // D√©cocher la checkbox
            document.getElementById('remember-me-test').checked = false;
            
            updateVerifications();
        }

        // Charger les donn√©es de "Se souvenir"
        function loadRememberMe() {
            const savedPhone = localStorage.getItem('remembered_phone');
            const savedRememberMe = localStorage.getItem('remember_me') === 'true';
            
            if (savedRememberMe && savedPhone) {
                document.getElementById('phone-test').value = savedPhone;
                document.getElementById('remember-me-test').checked = true;
                
                document.getElementById('remember-result').innerHTML = `
                    <strong>üì± Donn√©es charg√©es :</strong><br>
                    Num√©ro : ${savedPhone}<br>
                    "Se souvenir" : ${savedRememberMe}<br>
                    ‚úÖ La fonctionnalit√© fonctionne !
                `;
                document.getElementById('remember-result').className = 'status success';
            } else {
                document.getElementById('remember-result').innerHTML = `
                    <strong>‚ùå Aucune donn√©e trouv√©e :</strong><br>
                    Aucune information sauvegard√©e<br>
                    Activez "Se souvenir" et testez
                `;
                document.getElementById('remember-result').className = 'status warning';
            }
            
            updateVerifications();
        }

        // Afficher l'√©tat du localStorage
        function showLocalStorage() {
            const status = document.getElementById('localStorage-status');
            const rememberedPhone = localStorage.getItem('remembered_phone');
            const rememberMe = localStorage.getItem('remember_me');
            
            if (rememberedPhone && rememberMe === 'true') {
                status.innerHTML = `
                    <strong>üì± localStorage actif :</strong><br>
                    remembered_phone: ${rememberedPhone}<br>
                    remember_me: ${rememberMe}<br>
                    ‚úÖ Donn√©es sauvegard√©es
                `;
                status.className = 'status success';
            } else {
                status.innerHTML = `
                    <strong>‚ùå localStorage vide :</strong><br>
                    Aucune donn√©e de connexion sauvegard√©e<br>
                    Activez "Se souvenir" pour tester
                `;
                status.className = 'status error';
            }
        }

        // Mettre √† jour les v√©rifications
        function updateVerifications() {
            const verifications = document.getElementById('verifications');
            const rememberedPhone = localStorage.getItem('remembered_phone');
            const rememberMe = localStorage.getItem('remember_me');
            
            let html = '<h3>üîç V√©rifications :</h3>';
            
            // V√©rification 1 : localStorage
            if (rememberedPhone && rememberMe === 'true') {
                html += '<div class="status success">‚úÖ localStorage : Donn√©es sauvegard√©es</div>';
            } else {
                html += '<div class="status error">‚ùå localStorage : Aucune donn√©e</div>';
            }
            
            // V√©rification 2 : Persistance
            if (rememberedPhone) {
                html += '<div class="status success">‚úÖ Persistance : Num√©ro sauvegard√©</div>';
            } else {
                html += '<div class="status error">‚ùå Persistance : Aucun num√©ro</div>';
            }
            
            // V√©rification 3 : Pr√©f√©rence
            if (rememberMe === 'true') {
                html += '<div class="status success">‚úÖ Pr√©f√©rence : "Se souvenir" activ√©</div>';
            } else {
                html += '<div class="status error">‚ùå Pr√©f√©rence : "Se souvenir" d√©sactiv√©</div>';
            }
            
            verifications.innerHTML = html;
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // Charger les donn√©es existantes
            loadRememberMe();
            
            // √âcouter les changements de la checkbox
            document.getElementById('remember-me-test').addEventListener('change', function() {
                if (this.checked) {
                    // Cocher automatiquement si des donn√©es existent
                    const savedPhone = localStorage.getItem('remembered_phone');
                    if (savedPhone) {
                        document.getElementById('phone-test').value = savedPhone;
                    }
                }
            });
        });
    </script>
</body>
</html>
