version: "3.8"
services:
  backend:
    build: ./liveshop-backend
    environment:
      - NODE_ENV=production
      - DATABASE_URL=postgresql://postgres:manou24680@db.yxdapixcnkytpspbqiga.supabase.co:5432/postgres
      - SUPABASE_URL=https://yxdapixcnkytpspbqiga.supabase.co
      - SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl4ZGFwaXhjbmt5dHBzcGJxaWdhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyOTkxNjcsImV4cCI6MjA3MTg3NTE2N30.SxQtGOvsOel4aSODcT0bn8c9TcJ-6akc16l7tvZEokY
      - SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl4ZGFwaXhjbmt5dHBzcGJxaWdhIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NjI5OTE2NywiZXhwIjoyMDcxODc1MTY3fQ.Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8Ej8
      - VIRTUAL_HOST=api.livelink.store
      - LETSENCRYPT_HOST=api.livelink.store
      - LETSENCRYPT_EMAIL=skhadimsall@gmail.com
    ports:
      - "3001:3001"
    networks:
      - nginx-proxy
    restart: unless-stopped

  dashboard:
    build: ./web-client/liveshop-client
    environment:
      - VIRTUAL_HOST=livelink.store
      - LETSENCRYPT_HOST=livelink.store
      - LETSENCRYPT_EMAIL=skhadimsall@gmail.com
      - NGINX_PROXY_CONTAINER=1
    networks:
      - nginx-proxy
    restart: unless-stopped

  mobile:
    build: ./mobile-app/liveshop-vendor
    environment:
      - VIRTUAL_HOST=space.livelink.store
      - LETSENCRYPT_HOST=space.livelink.store
      - LETSENCRYPT_EMAIL=skhadimsall@gmail.com
      - NGINX_PROXY_CONTAINER=1
    networks:
      - nginx-proxy
    restart: unless-stopped

networks:
  nginx-proxy:
    external: true
